<html>
	<head>
		<script src="script/includes/options.js" type="text/javascript"></script>
		<script type="text/javascript">
			/* call options.createListeners() */
			/*chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
				if (request.method == "optionsTest" && request.option == "test") {
					console.log('lol');
					sendResponse({status: 'it worked'})
				}
			});*/

			//CHANGE THIS so that the if statement is created under the if statement down there V
			/*for (i in options) {
				chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
					console.log('request recieved...');
					console.log('asked for option ' + request.option + ' versus ' + options[i].name);
					console.log('looking for method ' + request.method + ' versus ' + 'getOption');
					if (request.method == 'getOption' && request.option == options[i].name) {
						console.log('retrieved ' + options[i].name);
						sendResponse({status: options[i].get()});
					}
				});
				console.log('created method for ' + options[i].name)
			}*/
			chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
				if (request.method == "addFolder") {
					folders = localStorage['folders'];
					if (!folders) {
						folders = new Array();
					}
					folder = request.folder;
					if (folders.length == 0) {
						folders[0] = folder;
					}
					else {
						folders += "," + folder;
					}
					localStorage['folders'] = folders;
				}
				else if (request.method == "removeFolder") {
					folders = localStorage['folders'].split(',');
					folder = request.folder;
					for (i in folders) {
						if (folders[i] == folder) {
							folders.splice(i,1);
						}
					}
					localStorage['folders'] = folders;
				}
				for (i in options) {
					else if (request.method == 'getOption' && request.option == options[i].name) {
						console.log('retrieved ' + options[i].name);
						sendResponse({status: options[i].get()});
					}
				}
				else
					sendResponse({}); // snub them.*/
			});
		</script>
	</head>
</html>